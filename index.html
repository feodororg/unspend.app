<!DOCTYPE html>
<html lang="en">

<head>
  <title>Unspend</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/typescript/4.1.3/typescript.min.js"></script>
  <meta charset="UTF-8" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" type="text/css" href="/styles.css" />
  <link rel="apple-touch-icon" sizes="180x180" href="./i/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="./i/favicon//favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/i/favicon//favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
</head>

<body>
  <form id="amountForm" onsubmit="event.preventDefault();">
    <h1>Unspend<sup>β <span id="version">0.1.2</span></sup></h1>

    <section id="section-amount">
      <input autofocus type="text" class="amount recalc number" name="amount" inputmode="decimal" pattern="[0-9,.]*"
        placeholder="Price" />
      <input class="reset-amount" value="×" type="reset" />
      <input autofocus type="text" class="count recalc number" name="count" inputmode="decimal" pattern="[0-9,.]*"
        placeholder="Items" />
    </section>

    <section class="widget" id="currency"></section>
    <section class="widget" id="period"></section>
  </form>

  <section class="about">
    <h2>About</h2>
    <p>The Unspend app helps you abstain from impulsive or excessive spending by showing clearly what a particular
      purchase would amount to if repeated daily, weekly, monthly, and yearly. It should
      supposedly scare you into frugality.
      More horrific features are on their way.</p>

      <p><a href="#" onclick="event.preventDefault(); window.location.reload(true)">Refresh to update</a> to the latest version.</p>
  </section>

  <section class="install">

    <h2>How to add Unspend to your phone home screen</h2>
    <p>Unspend is not a proper app yet but you still can add this webapp to homescreen and use it as a regular app.</p>

    <section class="howto">
      <p>On <strong>iPhone</strong>, tap the <strong>Share</strong> menu button <img alt="" class="howto-icon"
          src="/i/ios-share.png" /> in <strong>Safari</strong>, select <strong>Add to Home Screen</strong> <img
          class="howto-icon" alt="" src="/i/ios-homescreen.png" /> and tap <strong>Add</strong>.</p>

      <p>On <strong>Android</strong> in <strong>Chrome</strong>, tap the three vertical dots button <img alt=""
          class="howto-icon" src="/i/android-more.png" /> at the top right corner, select <strong>Add to Home
          screen</strong> <img alt="" class="howto-icon" src="/i/android-homescreen.png" />, tap <strong>Add</strong>
        and
        tap <strong>Add</strong>.</p>

      <p>On <strong>Android</strong> in the <strong>Samsung</strong> browser, tap the hamburger icon <strong
          class="howto-icon">≡</strong>, tap <strong>Add
          page
          to</strong> button <strong class="howto-icon">+</strong>, select <strong>Home Screen</strong> and tap
        <strong>Add</strong>.
      </p>
    </section>
  </section>

  <script>
    (async function () {
      const version = '0.1.3';
      document.getElementById('version').textContent = version;
      const response = await fetch(`/app.ts?${version}`);
      const tsCode = await response.text();
      const jsCode = ts.transpile(tsCode);
      eval(jsCode);
    })();
  </script>
</body>

</html>